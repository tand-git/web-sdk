/*! For license information please see sphereAnalytics.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SphereAnalytics=t():e.SphereAnalytics=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=122)}([function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"e",(function(){return c}));var n=1e3,o=60*n,a={XHR_ERROR:"XHR transaction failed due to an error",NO_CONNECTION:"No internet connectivity"},i={TRK:"trk",W_MSG:"wMsg",TRK_m:"trkM"},s={STRING:"string",NUMBER:"number",INTEGER:"integer",FLOAT:"float"},c={USER_ID:"userId",GENDER:"gender",GRADE:"grade",EMAIL:"email",BIRTH_YEAR:"birthYear",PHONE:"phoneNumber",USER_PROPERTY:"userProperty",USER_PROPERTY_LONG:"userPropertyLong",REMOVE_PROPERTY:"removeProperty",REMAIN_POINT:"remainingPoint",TOTAL_EARNED_POINT:"totalEarnedPoint",TOTAL_USED_POINT:"totalUsedPoint",POINT:"point",PUSH_INFO:"push_agree_info",PUSH_AD:"push_agree_advertise",PUSH_NIGHT:"push_agree_night",PUSH_FCM:"push_fcm_token"}},function(e,t,r){"use strict";var n,o,a,i,s,c=r(18),u=r.n(c),l=r(12),_=r.n(l),f=r(11),p=r(0),d=r(3),h=r(10),g=r(5),v=(r(4),{messageDelayMs:.5*p.d,propRetainMs:30*p.c}),y={storageKey:"_sphereId",storageTs:"_sphereTs",storageRef:"_sphereRef",webMsg:"_sphereWebMsg",backUp:"_backUpData",storageInfo:"_sphereInfo",noShowMsg:"_sphNoShowWMsg",savedMsg:"_sphMsg",sessionMng:"_sphereMng"},b={sapAsset:null},m=".tand.kr:8883",E=!0,O=!1,w=!1,A=!1,M=!1,T="v1.1",P="W";var I=u()(u()(u()({},v),y),{},{keyInConfig:function(e){for(var t=!1,r=0,n=Object.entries(y);r<n.length;r++){var o=_()(n[r],2);o[0];if(o[1]===e){t=!0;break}}return t},setBaseUrl:function(e){m=e},getBaseUrl:function(){return"https://trk"+(O?"-test":"")+m+("web"==o?"":"/m")},setAppKey:function(e){n=e},getAppKey:function(){return n},setTrackAnonymous:function(e){E=e},getTrackAnonymous:function(){return E},setTest:function(e){O=e},isTest:function(){return O},setInitCheck:function(e){w=e},getInitCheck:function(){return w},setWebMsgCheck:function(e){M=e},getWebMsgCheck:function(){return M},setWebMsgVer:function(e){T=e},getWebMsgVer:function(){return T},getWebMsgFetchType:function(){return P},getUserInfo:function(){return b},setUserInfo:function(e,t){try{switch(e){case"#userId":M&&b["#userId"]!==t&&h.a._fetchFuncCall(1e3),b["#userId"]=t;break;case"sapGrade":b.sapGrade=t;break;case"sapGender":b.sapGender=t;break;case"sapBirthYear":b.sapBirthYear=t;break;case"sapEmail":b.sapEmail=t;break;case"sapAsset":if(null==t){b[e]=t;break}var r=Object.keys(t);r.length>0&&(null!=b.sapAsset?b.sapAsset[r[0]]?Object.keys(t[r[0]]).indexOf("removePoints")>-1?(delete b.sapAsset[r[0]],0===Object.keys(b.sapAsset).length&&(b.sapAsset=null)):b.sapAsset[r[0]]=Object.assign(b.sapAsset[r[0]],t[r[0]]):b.sapAsset[r[0]]=t[r[0]]:b.sapAsset=t);break;default:null===t?delete b[e]:b[e]=t}}catch(e){d.a.log("configForProp",e)}M&&!A&&h.a.sapMsgTriggerCheck({name:null,date:Date.now(),param:{}})},getDeviceType:function(){return o},setDeviceType:function(e){o=e,"web"!=e&&"rn"!=e?P="aos"===e?"A":"I":"web"===e&&(P=Object(g.h)()?"M":"W"),i=Object(g.e)("_ga")},getInfo:function(){d.a.log("_appKey",I.getAppKey()),d.a.log("_deviceType",I.getDeviceType()),d.a.log("_test",I.isTest()),d.a.log("_anonymous",I.getTrackAnonymous()),d.a.log("Sphere Web SDK version ".concat(f.a.version))},getVersion:function(){return a},setVersion:function(e){return a=e},setBrowserNotSupported:function(){var e=navigator.userAgent.toLowerCase();A="Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=e.indexOf("msie")},getBrowserNotSupported:function(){return A},getGaId:function(){return i},optionSet:function(e){var t;null!=e&&((t=Object(g.g)(e,"logLevel"))&&("verbose"!==t&&"info"!==t&&"error"!==t||d.a.setLogLevel(t)),Object(g.j)(e,"test")&&this.setTest(!0),(t=Object(g.g)(e,"baseUrl"))&&this.setBaseUrl(t.replace(/\/+$/,"")),Object(g.j)(e,"trackAnonymous")&&this.setTrackAnonymous(!0),Object(g.j)(e,"webMsg")&&this.setWebMsgCheck(!0),(t=Object(g.g)(e,"domain"))&&this.setMultiDomain(t));var r=window.localStorage.getItem("_sphL");null!=r&&["info","verbose"].includes(r)&&d.a.setLogLevel(r)},setMultiDomain:function(e){null!=e&&"string"==typeof e&&(s=e)},getMultiDomain:function(){return s}});Object.freeze(I),t.a=I},function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return _}));var n=r(9),o=r.n(n),a=r(3),i=r(0);function s(e,t){return!!t.match(/^[a-zA-Z#_]\w{0,39}$/)||(a.a.error("Invalid ".concat(e," name: ").concat(t)),!1)}function c(e,t,r){switch(e){case i.f.STRING:return!!(o()(t)===e||null===t&&r);case i.f.INTEGER:return!(!(o()(t)===i.f.NUMBER||null===t&&r)||!u(t));case i.f.FLOAT:return!(!(o()(t)===i.f.NUMBER||null===t&&r)||u(t))}}function u(e){return null===e||e%1==0}function l(e,t,r){a.a.error("set ".concat(e,": The type of ").concat(t," is not ").concat(r))}function _(e){return null==e?null:o()(e)===i.f.STRING?e:e+""}},function(e,t,r){"use strict";var n,o=r(7),a=r.n(o),i=r(11),s="none",c="error",u="info",l="verbose",_=(n={},a()(n,s,-1),a()(n,c,0),a()(n,u,1),a()(n,l,2),n),f={production:s,development:l,test:l},p=d();function d(){return f[i.a.env]||c}function h(e,t){var r;if(!(_[p]<_[t])){for(var n=(new Date).toISOString(),o="log"===e?"  ":"info"===e?" ":"",a=["[".concat(i.a.namespace,"]"),n,"".concat(e.toUpperCase(),":").concat(o)],s=arguments.length,c=new Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];(r=console)[e].apply(r,a.concat(c))}}function g(e,t){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];h.apply(void 0,[e,t].concat(n))}}var v={getLogLevel:function(){return p},setLogLevel:function(e){e&&-1===Object.keys(_).indexOf(e)?h("error","error","Invalid log levels - verbose, info, error, none"):(p=e||d(),h("info",e,"Log Level: ".concat(p)))},log:g("log",l),info:g("info",u),error:g("error",c)};t.a=v},function(e,t,r){"use strict";var n=r(12),o=r.n(n),a=r(3),i=r(1),s=r(5);function c(){for(var e=[],t=0;t<16;++t)e.push(Math.floor(256*Math.random()));var r=new Uint8Array(e);return Object(s.d)(r).substring(0,22)}var u,l,_,f,p,d,h,g=r(2),v=r(0);function y(){return u+l}function b(e){return Object(g.b)(v.f.STRING,e,!1)&&i.a.keyInConfig(e)?_.getItem(e):null}function m(e){Object(g.b)(v.f.STRING,e,!1)&&i.a.keyInConfig(e)&&_.removeItem(e)}var E={init:function(e){var t,r,n;f=Object(s.h)(),p=navigator&&navigator.language,d=-1*(new Date).getTimezoneOffset();try{if(_=function(){var e,t=Number(Date.now()).toString(16);(e=window.localStorage).setItem(t,t);var r=e.getItem(t),n=t===r;return e.removeItem(t),n&&e?e:null}(),"web"!==e)return;if(!(t=window.localStorage.getItem(i.a.storageKey))||t.length<22?(u=c(),l="",_.setItem(i.a.storageKey,y())):(u=t.substring(0,22),l=t.substring(22)),r=Object(s.f)(document.location.href,i.a.isTest()),n=Object(s.f)(document.referrer,i.a.isTest()),h={val:r!==n,url:r!==n?document.referrer:""},!/^http(s)?:\/\/analytics[^\.]*\.tand\.kr/.test(h.url)&&h.val){var o={};h.url&&(o._referrer=h.url),o._entry=document.URL,o._isUtm=window.location.search.indexOf("utm_source")>-1,_.setItem(i.a.storageRef,JSON.stringify(o))}}catch(e){a.a.error("LocalStorage is not supported"),u=c(),l=""}},getUid:function(){return u},setUid:function(e){var t=b(i.a.storageKey);t&&_.setItem(i.a.storageKey,t.replace(u,e)),u=e},getProp:function(){return l},isMobile:function(){return f},getTimezoneOffset:function(){return d},getLang:function(){return p},setProp:function(e,t){l=t?"":e,_&&_.setItem(i.a.storageKey,y())},toString:y,getStorageRef:function(){return _.getItem(i.a.storageRef)},getItem:b,setItem:function(e,t){Object(g.b)(v.f.STRING,e,!1)&&i.a.keyInConfig(e)&&_.setItem(e,JSON.stringify(t))},removeItem:m,updateTs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();_&&_.setItem(i.a.storageTs,Number(e).toString(16))},checkTs:function(){return(new Date).getTime()-function(){if(_){var e=_.getItem(i.a.storageTs);if(e)return Number.parseInt(e,16)}return 0}()>=i.a.propRetainMs},resetStorageRef:function(){return _.removeItem(i.a.storageRef)},getRemainMsgCheck:function(){var e=!1,t=_.getItem("_sphMsg");try{t&&(e=JSON.parse(t).length>0)}catch(e){a.a.error("savedMsg Read Error",t)}return e},getNotShowMsg:function(){var e={};try{var t=b(i.a.noShowMsg);if(null!=t&&(e=JSON.parse(t)))for(var r=0,n=Object.entries(e);r<n.length;r++){var a=o()(n[r],1)[0];(new Date).getTime()>e[a]&&delete e[a]}return e}catch(e){return m(i.a.noShowMsg),{}}}};Object.freeze(E);t.a=E},function(e,t,r){"use strict";(function(e){r.d(t,"n",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"k",(function(){return c})),r.d(t,"m",(function(){return u})),r.d(t,"h",(function(){return l})),r.d(t,"i",(function(){return _})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return p})),r.d(t,"j",(function(){return d})),r.d(t,"a",(function(){return h})),r.d(t,"l",(function(){return g})),r.d(t,"b",(function(){return v})),r.d(t,"e",(function(){return y}));var n=r(9),o=r.n(n);function a(t){return new e(t.replace(/-/g,"+").replace(/_/g,"/"),"base64")}function i(t){var r=function(e){return Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join("")}(t);return e.from(r,"latin1").toString("base64").replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(e){for(var t="",r=0;r<e.length;){var n=e[r++];switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:t+=String.fromCharCode((31&n)<<6|63&e[r++]);break;case 14:t+=String.fromCharCode((15&n)<<12|(63&e[r++])<<6|(63&e[r++])<<0)}}return t}function c(e){try{var t=JSON.parse(e);return r=t,"object"===o()(r)&&null!==r&&!(r instanceof Array)}catch(e){return!1}var r}function u(e){try{return JSON.parse(e)}catch(e){return null}}function l(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}var _={Android:function(){return null!=navigator.userAgent.match(/Android/i)},BlackBerry:function(){return null!=navigator.userAgent.match(/BlackBerry/i)},IOS:function(){return null!=navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return null!=navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return null!=navigator.userAgent.match(/IEMobile/i)}};function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.match(/[^\/:](\/|$)/);if(r){var n=e.substring(0,r.index+1);if(t)return n;var o=n.match(/((([^\./]+)\.)?([^\./:]+|[^\./:]{2}\.[^\.:]{2}))(:\d*)?$/g);if(o)return o[0]}return null}function p(e,t){return t in e&&e[t]?e[t]:null}function d(e,t){return t in e&&!0===e[t]}function h(e,t,r){var n="desc"===e?-1:1,o="desc"===e?1:-1;return t.sort((function(e,t){return e[r]>t[r]?n:e[r]<t[r]?o:0})),t}function g(e,t){return null==e||null==t||"string"==typeof e[0]||"number"==typeof e[0]||e.sort((function(e,r){for(var n=0,o=0;o<t.length;){if(0!==(n=e[t[o].key]>r[t[o].key]?1:e[t[o].key]<r[t[o].key]?-1:0)){"desc"==t[o].order&&0!==n&&(n=n>0?-1:1);break}o++}return n})),e}function v(e){var t=!1;return null!=e&&e.length>0&&/^_sphereEvent_/.test(e)&&(t=!0,e=e.replace("_sphereEvent_","")),{name:e,check:t}}function y(e){e+="=";var t=document.cookie,r=t.indexOf(e),n="";if(-1!=r){r+=e.length;var o=t.indexOf(";",r);-1==o&&(o=t.length),n=t.substring(r,o)}return decodeURI(n)}}).call(this,r(37).Buffer)},function(e,t,r){"use strict";var n=r(7),o=r.n(n),a=r(17),i=r.n(a),s=r(3),c=r(1),u=r(10),l={};t.a={prop:function(e,t){s.a.info("Set user property. ".concat(e,": ").concat(t));var r={prop:{}};return r.prop[e]=t,r.date=Date.now(),c.a.setUserInfo(e,t),r},asset:function(e,t,r){var n;if(e)if(t){s.a.info("Set user ".concat(e,". ").concat(t,": ").concat(r));var a={};n={prop:a},a.sapAsset=a={},a[e]=a={},a[t]=r,c.a.setUserInfo("sapAsset",o()({},e,o()({},t,r)))}else{s.a.info("Reset user ".concat(e,"s."));var i={};n={prop:i},i.sapAsset=i={},i[e]=null,c.a.setUserInfo("sapAsset",o()({},e,null))}else{s.a.info("Reset all user assets.");var u={};n={prop:u},u.sapAsset=null,c.a.setUserInfo("sapAsset",null)}return n.date=Date.now(),n},event:function(e,t){s.a.info("Log event. Event name: ".concat(e));var r,n=Date.now();try{if(t&&Object.keys(t).length){var o=l[e];if(!i()(o,t))return l[e]=t,r={name:e,date:t.sapDate?t.sapDate:n,param:t},c.a.getWebMsgCheck()&&!c.a.getBrowserNotSupported()&&u.a.sapMsgTriggerCheck(r),{events:[r],date:r.date}}else if(!l[e])return l[e]={},r={name:e,date:n},c.a.getWebMsgCheck()&&!c.a.getBrowserNotSupported()&&u.a.sapMsgTriggerCheck(r),{events:[r],date:r.date}}catch(e){}return!1},resetDupCache:function(){l={}},eventPropLog:function(e,t,r){e?s.a.info("Set user property. ".concat(t,": ").concat(r)):s.a.info("Log event. Event name. ".concat(t,": ").concat(r))}}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";var n,o=r(12),a=r.n(o),i=r(17),s=r.n(i),c=r(14),u=r.n(c),l=r(54),_=r.n(l),f=r(13),p=r.n(f),d=r(55),h=r.n(d),g=r(20),v=r.n(g),y=r(56),b=r.n(y),m=r(0),E=r(1),O=r(11),w=r(3),A=r(4),M=r(6),T=r(5),P=r(36),I="undefined"==typeof Promise?r(120).Promise:Promise,S=!0,R=[];function k(e,t,r,n,o){var a=r.xhr;if(4===a.readyState){var i=a.status>=200&&a.status<400,s=Object(T.m)(a.responseText);if(0!==a.status)return s||200===a.status?t(i?function(e,t,r){var n={status:"ok",statusCode:e.status,sendBody:e,resHeader:{},reqDateArr:r.msgArr};t===m.a.W_MSG?n=W(t,e,n):(delete r.msgArr,w.a.info("sph_data sent successfully.",r));e.responseText&&(n.body=Object(T.m)(e.responseText));return n}(a,n,o):D(a,n,"SERVER_CANNOT_PROCESS",!0)):e(D(a,n,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(D(a,n,"NO_CONNECTION"))}}function D(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={status:"error",statusCode:e.status,action:n?"CONTINUE":"RETRY",response:Object(T.k)(e.responseText)?JSON.parse(e.responseText):e.responseText,message:m.b[r],code:r};return W(t,e,o)}function C(e,t){if(E.a.getAppKey()||w.a.error("appKey not exist."),A.a.getUid()){var r=function(e){switch(e){case m.a.W_MSG:return"https://msg"+(E.a.isTest()?"-test":"")+".tand.kr:8886/message/"+E.a.getWebMsgVer()+"/fetch/"+E.a.getAppKey()+"/"+A.a.getUid()+function(){var e={};e._pl=E.a.getWebMsgFetchType(),null!=E.a.getUserInfo()["#userId"]&&(e._user_id=E.a.getUserInfo()["#userId"]);return function(e){var t="",r=[];if(e)for(var n in e)r.push(n+"="+e[n]);r.length>0&&(t="?"+r.join("&"));return t}(e)}();case m.a.TRK:default:return E.a.getBaseUrl()+"/"+E.a.getAppKey()+"/"+A.a.getUid()}}(e);return new I((function(n,o){var i=new XMLHttpRequest;i.open("POST",r,!0),function(e,t){var r=[["Content-Type","application/json"],["X-Version","".concat(O.a.version)]];t===m.a.W_MSG&&r.push(["Access-Control-Expose-Headers","SPR-Fetch-Interval"]),r.forEach((function(t){var r=a()(t,2),n=r[0],o=r[1];e.setRequestHeader(n,o)}))}(i,e),i.onreadystatechange=function(){return k(o,n,{xhr:i},e,t)},i.onerror=function(){return o(D(i,e,"XHR_FAIL",t))},i.timeout=1e3;var s=b()(t);delete s.msgArr,i.send(JSON.stringify(s))}))}w.a.error("uid not exist.")}function U(){x(),n=setInterval((function(){try{L(j())}catch(e){w.a.error(e)}finally{x()}}),E.a.messageDelayMs)}function x(){clearInterval(n)}function j(){var e={},t=[],r=v()(R);if(R.length>0){for(var n;(n=r.shift())&&S;){if(n.prop&&Object.keys(n.prop).includes("#userId")&&null==n.prop["#userId"])return S=!1,t.push(n),e.msgArr=t,e;S&&(t.push(n),e=h()(e,n,(function(e,t){return p()(e)&&p()(t)?_()(e,t):u()(e)&&u()(t)?void 0:e||t})))}return e.msgArr=t,e}return e}function N(e){w.a.log("_loginCheck",e),(E.a.getTrackAnonymous()||e)&&""!==A.a.getStorageRef()&&A.a.resetStorageRef()}function L(e){E.a.getAppKey()&&(e=Y(e=function(e){if(e=e||{date:Date.now()},"web"===E.a.getDeviceType()){var t=e.prop;if(t||A.a.getProp()){var r=[];if(A.a.getProp()?r.push(A.a.getProp()):r.push(""),t){delete e.prop;var n=P.a.encrypt(JSON.stringify(t));r.push(n)}e.p=r}e.anonymous=E.a.getTrackAnonymous();var o=A.a.getStorageRef();null!=o&&""!==o&&(o=JSON.parse(o),e.referrer=o._referrer,e.entry=o._entry)}else e.prop=E.a.getUserInfo(),e.meta={sdk:E.a.getVersion()};return e}(e)),"web"!==E.a.getDeviceType()||E.a.getTrackAnonymous()||"p"in e?C(m.a.TRK,e).then((function(e){return B(e)})).catch((function(e){B(e)})):w.a.log("Anonymous user event ignored."))}function B(e){if(e&&200===e.statusCode)try{A.a.updateTs(),e.body&&"p"in e.body&&A.a.setProp(e.body.p),S||(S=!0,window.SphereAnalytics.resetUserProperties()),e.body?N(e.body.login||!1):N(!1);var t=e.reqDateArr;t&&Array.isArray(t)&&t.length>0&&((R=R.filter((function(e){return!t.find((function(t){return s()(e,t)}))}))).length>0?(G(),U()):q()),M.a.resetDupCache()}catch(e){R=[],G()}}function W(e,t,r){return e===m.a.W_MSG&&(r["SPR-Fetch-Interval"]=t.getResponseHeader("SPR-Fetch-Interval"),r.date=t.getResponseHeader("date")),r}function K(){var e=window.localStorage.getItem(E.a.savedMsg);R=e?JSON.parse(e):[]}function G(){A.a.setItem(E.a.savedMsg,R)}function q(){A.a.removeItem(E.a.savedMsg)}function Y(e){return E.a.getGaId()&&(e.ga=E.a.getGaId()),e.mobile=Object(T.h)(),e.gmt=A.a.getTimezoneOffset(),A.a.getLang()&&(e.lang=A.a.getLang()),E.a.isTest()&&(e.test=!0),e}var F={init:function(e){P.a.init(e),K()},put:function(e){try{if(E.a.getBrowserNotSupported())return;if("boolean"==typeof e&&!e)return;if(e&&function(e){try{E.a.getInitCheck()||K(),R.length>0&&(R=R.filter((function(e){return!((new Date).getTime()-(e.date?e.date:e.events[0].date)>=18e5)}))),R.push(e),R.length>200&&R.splice(0,30),G()}catch(e){q(),w.a.error("savedEvent:Error")}}(e),!E.a.getInitCheck())return;e?U():L(j())}catch(e){}},send:C};Object.freeze(F),t.a=F},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18),_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(12),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__),lodash_isEqual__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(17),lodash_isEqual__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_6__),lodash_clone__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(20),lodash_clone__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_clone__WEBPACK_IMPORTED_MODULE_7__),_sender__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8),_logger__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3),_storage__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4),_config__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1),_util_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5),_constants__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(0),g_sphWebMsgTrigger={},g_fetchDefaultInterval=13e3,g_lastServerTime=0,g_fetchInterval,g_awaitMsg={top:[],box:[],bottom:[]},g_allowShowMsg={top:!0,box:!0,bottom:!0},g_testMsgIs=!1,g_notShowMsg={},_tagDiv="div",_tagSpan="span",_tagButton="button",_bgColor="background-color",_fontSize="font-size",_color="color",_cls_pointer="_sa_cursor-pointer",_cls_t_size_medium="_sa_t-size__medium",_survey_sub_type_check="check_mark",_survey_type_yes_no="yes_or_no";function init(){try{if(!_config__WEBPACK_IMPORTED_MODULE_11__.a.getWebMsgCheck())return;g_notShowMsg=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getNotShowMsg(),_isTestMsg(_sapMsgShow,msgDataCall)}catch(e){}}function msgDataCall(){try{var e=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);null===e&&(e="{}");var t=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(e),r=Object.keys(t);r.splice(r.indexOf("date"),1),r.splice(r.indexOf("SPR-Fetch-Interval"),1);var n={campaigns:[]};if(r.length>0){var o=[];r.forEach((function(e){var r={campaign_id:e,modified:t[e].modified};o.push(r)})),n.campaigns=o,o.length>0&&_settingCmpData()}if(t.date&&t["SPR-Fetch-Interval"]){var a=t.date,i=t["SPR-Fetch-Interval"],s=(new Date).getTime(),c=new Date(a).getTime()+Number(i);s>=c||g_lastServerTime===new Date(a).getTime()&&Number(g_fetchInterval==i)?_sapMsgFetchCall(n):(g_lastServerTime=a,g_fetchInterval=i,_fetchFuncCall(c-s))}else _sapMsgFetchCall(n)}catch(e){}}function _settingCmpData(){try{var e=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);if(null!=e){for(var t=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(e),r=["Last-Modified","SPR-Fetch-Interval","date"],n=0,o=Object.entries(t);n<o.length;n++){var a=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(o[n],1)[0];r.includes(a)||(t[a].trigger_scenarios_private?t[a].trigger_scenarios.length>t[a].showedScenarios.length&&_msgTriggerSet(t[a]):t[a].showedScenarios.length<=0&&_msgTriggerSet(t[a]))}sapMsgTriggerCheck({name:null,date:Date.now(),param:{}})}}catch(e){}}function _sapMsgFetchCall(e){_config__WEBPACK_IMPORTED_MODULE_11__.a.getWebMsgCheck()&&_sender__WEBPACK_IMPORTED_MODULE_8__.a.send(_constants__WEBPACK_IMPORTED_MODULE_13__.a.W_MSG,e).then((function(e){200===e.statusCode&&_sapMsgFetchData(e,_fetchFuncCall)})).catch((function(e){304===e.statusCode&&_sapMsgFetchData(e,_fetchFuncCall)}))}function _sapMsgFetchData(e,t){g_fetchInterval=e["SPR-Fetch-Interval"];var r=e.date;g_lastServerTime=new Date(r).getTime();var n=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);null===n&&(n="{}");var o=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(n);if(delete o["Last-Modified"],delete o.date,delete o["SPR-Fetch-Interval"],200===e.statusCode){var a=e.body;a&&a.campaigns&&(a.campaigns.forEach((function(e){var t=e.metadata.id;if(e.metadata.is_deleted)delete o[t],delete g_sphWebMsgTrigger[t],delete g_notShowMsg[t];else{var r=o[t],n=[],a=!1;!r||e.metadata.is_test|e.metadata.is_modified||(n=r.showedScenarios,a=r.closeCmp),o[t]=_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_4___default()({content:e.content,duration:e.duration,priority:e.priority,trigger_scenarios_private:e.trigger_scenarios_private,trigger_scenarios:e.trigger_scenarios,showedScenarios:n,closeCmp:a,ref_url:e.ref_url},e.metadata),o[t].trigger_scenarios_private?o[t].trigger_scenarios.length>n.length&&_msgTriggerSet(o[t]):n.length<=0&&_msgTriggerSet(o[t])}})),Object.keys(g_notShowMsg).length>0?_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.noShowMsg,g_notShowMsg):_storage__WEBPACK_IMPORTED_MODULE_10__.a.removeItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.noShowMsg))}else for(var i=0,s=Object.entries(o);i<s.length;i++){var c=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(s[i],1)[0];o[c].showedMsgs&&o[c].showedMsgs.forEach((function(e){window.SphereAnalytics.logEvent("_sphereEvent_iamViewed",e)}))}o.date=r,o["SPR-Fetch-Interval"]=g_fetchInterval,_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg,o),sapMsgTriggerCheck({name:null,date:Date.now(),param:{}}),t()}function sapMsgTriggerCheck(e){var t=this;try{var r=function(){if(!_config__WEBPACK_IMPORTED_MODULE_11__.a.getInitCheck())return{v:void 0};for(var r=[],n=function(){var n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(a[o],1)[0],i=g_sphWebMsgTrigger[n];e.date>=i.startTime&&(null==i.endTime||e.date<=i.endTime)&&i.trigger_scenarios&&i.trigger_scenarios.forEach((function(o,a){var s=Object.keys(o);if(s&&1===s.length&&"id"===s[0])r.findIndex((function(e){return e.id===n}))>-1||r.push({id:n,sNo:o.id});else if(!1===i.closeCmp&&-1===i.showedScenarios.indexOf(o.id)){var c=!0,u=!0,l=!0;if(o.time){c=!1;var _=o.time.type;("immediately"===_||"between"===_&&"string"==typeof _.startTime&&"string"==typeof _.endTime&&e.date>=_timeConvertToDay(_.startTime)&&e.date<=_timeConvertToDay(_.endTime))&&(c=!0)}if(o.events&&(u=!1,o.events.forEach((function(t,r){var o=[];if(t.name===e.name)if(t.params?t.params.forEach((function(t){var r,n;(null==e||null===(r=e.param)||void 0===r?void 0:r[t.name])?"string"===t.type?(n=t.values.indexOf(e.param[t.name])>-1,o.push(t.except?!n:n)):"boolean"===t.type?(n=t.boolean_value===e.param[t.name],o.push(t.except?!n:n)):t.filter_set&&(n=_comparison_num(t.filter_set,e.param[t.name]),o.push(t.except?!n:n)):o.push(!1)})):o.push(!0),u=o.indexOf(!1)<=-1){if(u=!0,t.count>1){--t.count,u=!1;var i=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);if(null!=i&&""!==i){var s=JSON.parse(i);s[n].trigger_scenarios[a].events[r].count&&s[n].trigger_scenarios[a].events[r].count>0&&(s[n].trigger_scenarios[a].events[r].count=s[n].trigger_scenarios[a].events[r].count-1),_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg,s)}}}else;}),t)),o.props){l=!1;var f=[];o.props.forEach((function(e){var t;if("string"===e.type){var r=_getUserInfoValue(e.key,e.sub_key);t=!(!r||0!==e.values.length)||e.values.indexOf(r)>-1,f.push(e.except?!t:t)}else if(e.filter_set){var n=_getUserInfoValue(e.key,e.sub_key);t=_comparison_num(e.filter_set,n),f.push(e.except?!t:t)}})),l=f.indexOf(!1)<=-1}c&&u&&l&&(r.findIndex((function(e){return e.id===n}))>-1||r.push({id:n,sNo:o.id}))}}),t)},o=0,a=Object.entries(g_sphWebMsgTrigger);o<a.length;o++)n();for(var i=0,s=r;i<s.length;i++){var c=s[i];delete g_sphWebMsgTrigger[c.id],c.sNo=c.sNo?c.sNo:1,c.event=e}_manageMsg(r)}();if("object"===_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_3___default()(r))return r.v}catch(e){}}function _manageMsg(e){try{var t=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);if(null!=t){var r,n=_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2___default()(e);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(t)[o.id];o.priority=a.priority,o.start_time=a.start_time,o.end_time=a.end_time?a.end_time:2534022144e5,o.type="box"===a.content.shape.type?a.content.shape.type:a.content.shape.style.location,g_awaitMsg[o.type].push(o)}}catch(e){n.e(e)}finally{n.f()}}_callShowMsg()}catch(e){}}function _callShowMsg(){try{for(var e=0,t=Object.entries(g_awaitMsg);e<t.length;e++){var r=t[e];if(Array.isArray(r[1])&&r[1].length>0&&g_allowShowMsg[r[0]]&&(r[1]=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.l)(r[1],[{key:"priority",order:"asc"},{key:"end_time",order:"asc"},{key:"start_time",order:"desc"}]),Array.isArray(r[1])&&r[1].length>0)){var n=r[1][0];n.id&&n.sNo&&(g_allowShowMsg[r[0]]=!1,_sapMsgShow(n.id,n.sNo,n.event))}}}catch(e){}}function _msgTriggerSet(e){try{if(g_notShowMsg[e.id]&&!(Date.now()>g_notShowMsg[e.id]))return;g_sphWebMsgTrigger[e.id]&&delete g_sphWebMsgTrigger[e.id];var t={};t.trigger_scenarios=e.trigger_scenarios,t.trigger_scenarios_private=e.trigger_scenarios_private,t.startTime=e.start_time,t.endTime=e.end_time,t.showedScenarios=e.showedScenarios,t.closeCmp=e.closeCmp,g_sphWebMsgTrigger[e.id]=t}catch(e){}}function _sapMsgShow(e,t,r){try{var n;null===(n=document.querySelector("#"+e))||void 0===n||n.remove();var o,a,i,s=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg),c={campaignId:e,scenarioEvent:r,scenarioId:t,sapDate:Date.now()};if(null!=s||g_testMsgIs){var u,l;if(null==s||g_testMsgIs){var _=document.querySelector("#sapTestMsg");_&&document.body.removeChild(_);var f=new URLSearchParams(decodeURI(window.location.search.substring(1))).get("sapTestMsg");if(null==f||""===f)return;a=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(f),o=a.content}else{if((a=(i=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(s))[e]).showedScenarios.includes(t))return;a.showedScenarios.push(t),a.trigger_scenarios_private||(a.closeCmp=!0),a.showedMsgs||(a.showedMsgs=[]),c.triggered=r.date,c.messageId=a.message_id,a.showedMsgs.push=c,o=a.content}var p="sphereCss";if(!document.getElementById(p)){var d=document.getElementsByTagName("head")[0],h=createEl("link");h.id=p,h.rel="stylesheet",h.type="text/css",a&&a.ref_url&&(h.href=window.location.host.includes("test.tand.kr")?"https://cdn-test.tand.kr/sdk/demo/css/style/style.css":a.ref_url.css),appendC(d,h)}var g=createEl(_tagDiv);g.id=e,g.style.position="relative";var v=createEl(_tagDiv);v.id="sa-campaign__v2",classAdd(v,"_sa_dim"),(null===(u=o)||void 0===u?void 0:u.outer)&&o.outer.css_classes&&classAdd(v,o.outer.css_classes),appendC(g,v);var y=createEl(_tagDiv);o&&o.shape&&o.shape.css_classes&&classAdd(y,o.shape.css_classes),appendC(v,y),appendC(g,v);var b=createEl(_tagDiv);classAdd(b,"_sa_campaign-wrapper"),colorAdd(b,o.shape.style,!0);var m=createEl(_tagDiv);classAdd(m,"_sa_campaign-inner"),o&&o.layout&&o.layout.css_classes&&classAdd(m,o.layout.css_classes),colorAdd(m,o.layout.style,!0);var E=createEl(_tagDiv);if(classAdd(E,"_sa_image-area"),null===(l=o)||void 0===l?void 0:l.image){var O=new Image;classAdd(O,"_sa_img"),o&&o.image&&"string"!=typeof o.image&&(O.src=o.image.url),O.alt="campaignImage",appendC(E,O),appendC(m,E)}var w=!1,A=createEl(_tagDiv);classAdd(A,"_sa_text-area");var M=createEl("p");classAdd(M,"_sa_title");var T=o.title;if(T)classAdd(M,T.css_classes),T.style&&(styleAdd(M,T.style),T.text&&appendT(M,T.text)),appendC(A,M);var P=createEl("p");classAdd(P,"_sa_subtext");var I=o.body;if(I&&(classAdd(P,I.css_classes),appendC(A,P),w=!0,"string"!=typeof I&&I.style)){var S;o.body.style;(null===(S=o.body)||void 0===S?void 0:S.style)&&styleAdd(P,o.body.style),I.text&&appendT(P,I.text)}(T||I)&&appendC(m,A);var R,k,D={};if(o.survey){var C,U=[];o.post_process_contents&&(R=o.post_process_contents.find((function(e){return!0===e.is_success})),k=o.post_process_contents.find((function(e){return!1===e.is_success})));var x=createEl(_tagDiv),j="_sa_survey-question",N="_sa_survey-question-option";classAdd(x,j),o.survey.questions.forEach((function(t){U.push(t.order);var r=createEl("p");classAdd(r,j+"-title");var n=t.question_content,a=n.style,i=t.question_option;n.css_classes&&classAdd(r,n.css_classes),a&&styleAdd(r,a),n.text&&appendT(r,n.text);var s=createEl(_tagDiv);classAdd(s,N);var c=createEl("radio"===t.type?"ol":_tagDiv);classAdd(c,N+"__"+t.type);var u=t.sub_type;if(t.type===_survey_type_yes_no&&classAdd(c,N+"__"+t.type+"__"+u),["radio","checkbox","yes_or_no"].includes(t.type)?i.question_option_contents.forEach((function(r,o){var a,s,l=r.style,_=r.choice_style;if("radio"===t.type){var f;s=(a=createEl("li")).dataset,classAdd(a,[N+"__radio--item",_cls_pointer],i.css_classes);var p=createEl(_tagSpan),d=createEl("p");classAdd(d,N+"--text"),appendT(d,r.text),classAdd(p,"_sa_icon_radio_button_unchecked"),appendC(a,p),appendC(a,d),s.choiceStyle=_objToStr({color:null==i||null===(f=i.choice_style)||void 0===f?void 0:f.color})}else if(t.type===_survey_type_yes_no){if(s=(a=createEl("custom"===u?_tagDiv:"p")).dataset,"custom"!==u&&classAdd(a,_cls_pointer,N+"__"+(0===o?"yes":"no")),r.css_classes&&classAdd(a,r.css_classes),"radio_button"===u)appendT(a,r.text),l&&styleAdd(a,l,["cl","bg"]);else{var h,g=createEl(_tagSpan);if("custom"!==u)classAdd(h=createEl(_tagSpan),"_sa_icon_"+(u===_survey_sub_type_check?0===o?"yes_circle":"no_circle":0===o?"thumb_up":"thumb_down")+"_unchecked");else classAdd(a,N+"__yes_or_no__custom--item"),classAdd(h=new Image,N+"__yes_or_no__custom-image"),h.src=r.image_url,h.onload=function(){img_resize()};r.css_classes&&![_survey_sub_type_check,_survey_type_yes_no].includes(u)&&classAdd(h,r.css_classes),r.text&&appendT(g,r.text),_&&colorAdd(h,_),appendC(a,h),[_survey_sub_type_check,_survey_type_yes_no].includes(u)&&(0!==o&&styleRemove(g,"color"),appendC(a,g))}r.choice_css_classes&&(s.choiceCss=_objToStr(r.choice_css_classes)),_&&(s.choiceStyle=_objToStr(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({color:null==_?void 0:_.color},"background-color",null==_?void 0:_[_bgColor]))),l&&(s.style=_objToStr(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({color:null==l?void 0:l.color},"background-color",null==l?void 0:l[_bgColor])))}l&&"radio_button"!==u&&(l.color&&colorAdd(a,l.color),l[_bgColor]&&"radio"!==t.type&&colorAdd(a,l,!0)),s.rating=o,s.text=r.text||r.value,s.value=r.value,s.order=r.order,a.onclick=function(r){r.stopPropagation();try{var o=r.target.parentNode.parentNode,a=r.target.parentNode.dataset,i=r.target.tagName,s=t.type;"radio"===s&&"LI"===i&&(o=r.target.parentNode,a=r.target.dataset),s===_survey_type_yes_no&&("radio_button"===u&&(o=r.target.parentNode,a=r.target.dataset),"check_mark"!==u&&"yes_or_no"!==u||"P"===i&&(o=r.target.parentNode,a=r.target.dataset)),o.childNodes.forEach((function(e,r){var n=e.firstChild,o=e.dataset;if("radio"===t.type)classRemove(n,["_sa_icon_radio_button_unchecked","_sa_icon_radio_button_checked"]),e.childNodes.forEach((function(e,t){styleRemove(e,_color),r===Number.parseInt(a.rating)?(colorAdd(e,_strToObj(o.choiceStyle)),0===t&&classAdd(e,"_sa_icon_radio_button_checked")):0===t&&classAdd(e,"_sa_icon_radio_button_unchecked")}));else if(t.type===_survey_type_yes_no)if("radio_button"===u)styleRemove(e,_color),r===Number.parseInt(a.rating)?(styleAdd(e,_strToObj(o.choiceStyle),["cl","bg"]),o.choiceCss&&classAdd(e,JSON.parse(o.choiceCss))):(styleAdd(e,_strToObj(o.style),["cl","bg"]),o.choiceCss&&classRemove(e,JSON.parse(o.choiceCss)));else if("check_mark"===u||"yes_or_no"===u){var i=u===_survey_sub_type_check?0===r?"yes_circle":"no_circle":0===r?"thumb_up":"thumb_down";classRemove(n,["_sa_icon_"+i+"_unchecked","_sa_icon_"+i+"_checked"]),classAdd(n,"_sa_icon_"+i+(r===Number.parseInt(a.rating)?"_checked":"_unchecked")),[_survey_sub_type_check,_survey_type_yes_no].includes(u)&&e.childNodes.forEach((function(e,t){styleRemove(e,_color),[_survey_type_yes_no].includes(u)&&0===t&&colorAdd(e,_strToObj(o.choiceStyle)),r===Number.parseInt(a.rating)?colorAdd(e,_strToObj(a.choiceStyle)):0===t&&[_survey_sub_type_check].includes(u)&&colorAdd(e,_strToObj(o.choiceStyle))}))}else"custom"===u&&(classRemove(e,"_sa_item_checked"),r===Number.parseInt(a.rating)&&classAdd(e,"_sa_item_checked"))})),_surveySetData(e,{order:t.order,text:n.text,answer:{replyOrder:a.order,replyText:a.text,replyValue:a.value}})}catch(r){}},appendC(c,a)})):function(){var r,a,s="star_rating"===t.type,u=s?c:createEl(_tagDiv),l=createEl("ol");l.dataset.numAdd=i.rating_low_count,classAdd(l,"_sa_survey-question-option__number_rating--list");var _=createEl("ol");_.dataset.numAdd="6",classAdd(_,"_sa_survey-question-option__number_rating--list");var f=0===i.rating_low_count?0:1,p=i.rating_count|i.rating_high_count;D.banner_rating_num={check:"banner"===o.shape.type&&!s,width:5===p?"200px":"340px"};for(var d=f;d<=p;d++){var h=createEl(s?_tagSpan:"li");h.dataset.rating=d,s?(classAdd(h,[_cls_pointer,"_sa_icon_star_unchecked"]),appendC(u,h)):(appendT(h,d),classAdd(h,"_sa_survey-question-option__number_rating--item"),appendC("banner"===o.shape.type||l.childNodes.length<5+(0===i.rating_low_count?1:0)?l:_,h)),h.onclick=function(r){try{s?r.target.parentNode.childNodes.forEach((function(e,t){var n=t+1;classRemove(e,["_sa_icon_star_unchecked","_sa_icon_star_checked"]),styleRemove(e,_color),n<=r.target.dataset.rating?(colorAdd(e,i.choice_style),classAdd(e,"_sa_icon_star_checked")):classAdd(e,"_sa_icon_star_unchecked")})):r.target.parentNode.parentNode.childNodes.forEach((function(e,t){"OL"===e.tagName&&e.childNodes.forEach((function(t,n){var o,a=n+Number.parseInt(null===(o=e.dataset)||void 0===o?void 0:o.numAdd);styleRemove(t,_bgColor),a===Number.parseInt(r.target.dataset.rating)&&colorAdd(t,i.choice_style,!0)}))}));var o=r.target.dataset.rating;_surveySetData(e,{order:t.order,text:n.text,answer:{replyOrder:o,replyText:o,replyValue:o}})}catch(r){}}}if(!s){classAdd(u,"_sa_survey-question-option__number_rating--wrapper"),classAdd(u,N+"__number_rating--value-area");var g=createEl(_tagDiv);if(classAdd(g,N+"__number_rating--text-area"),appendT(r=createEl("p"),i.rating_low_text),(null==i?void 0:i.rating_low_style)&&styleAdd(r,null==i?void 0:i.rating_low_style),classAdd(r,"_sa_survey-rating-low-text"),appendT(a=createEl("p"),i.rating_high_text),(null==i?void 0:i.rating_high_style)&&styleAdd(a,null==i?void 0:i.rating_high_style),classAdd(a,"_sa_survey-rating-high-text"),classAdd(r,null==i?void 0:i.rating_low_css_classes),appendC(g,r),i.rating_high_count<6||"banner"===o.shape.type)appendC(g,a),appendC(u,g),appendC(u,l);else{appendC(u,g),appendC(u,l),appendC(u,_);var v=createEl(_tagDiv);classAdd(v,N+"__number_rating--text-area"),classAdd(a,null==i?void 0:i.rating_high_css_classes),appendC(v,a),appendC(u,v)}appendC(c,u)}}(),appendC(s,c),appendC(x,r),appendC(x,s),k){var l,_,f,p,d,h=createEl("p");h.id=e+"_q_"+t.order,(null===(l=k.body)||void 0===l?void 0:l.text)&&appendT(h,null===(_=k.body)||void 0===_?void 0:_.text),classAdd(h,"_sa_survey-error-message",null===(f=k.body)||void 0===f?void 0:f.css_classes),classAdd(h,"_sa_survey-error-message",null===(p=k.body)||void 0===p?void 0:p.css_classes),styleAdd(h,null===(d=k.body)||void 0===d?void 0:d.style),h.style.display="none",appendC(x,h)}})),(null==D||null===(C=D.banner_rating_num)||void 0===C?void 0:C.check)&&(x.style.maxWidth=D.banner_rating_num.width),appendC(m,x),g.dataset.qArr=JSON.stringify(U)}var L=createEl(_tagDiv),B=createEl(_tagDiv),W=createEl(_tagDiv);if(R){var K,G,q,Y,F,z,H,J,V,X,$;L.id="sa-campaign-post-process",classAdd(L,"_sa_dim"),(null===(K=o)||void 0===K||null===(G=K.outer)||void 0===G?void 0:G.css_classes)&&classAdd(L,o.outer.css_classes),classAdd(B,"_sa-campaign-post-process-box"),(null===(q=o)||void 0===q||null===(Y=q.shape)||void 0===Y?void 0:Y.style.location)&&classAdd(B,"_sa_location__"+o.shape.style.location),L.style.display="none",appendC(L,B),appendC(B,W),classAdd(W,"sa-campaign-post-process-main");var Z=createEl(_tagDiv);appendC(W,Z),classAdd(Z,"_sa_text-area");var Q=createEl("p");(null===(F=R.title)||void 0===F?void 0:F.text)&&appendT(Q,null===(z=R.title)||void 0===z?void 0:z.text),classAdd(Q,"_sa_title",null===(H=R.title)||void 0===H?void 0:H.css_classes),styleAdd(Q,null===(J=R.title)||void 0===J?void 0:J.style),appendC(Z,Q);var ee=createEl("p");(null===(V=R.body)||void 0===V?void 0:V.text)&&appendT(ee,R.body.text),classAdd(ee,"_sa_subtext",null===(X=R.body)||void 0===X?void 0:X.css_classes),styleAdd(ee,null===($=R.body)||void 0===$?void 0:$.style),appendC(Z,ee),appendC(g,L)}var te="box"===a.content.shape.type?a.content.shape.type:a.content.shape.style.location;g_awaitMsg[te]=g_awaitMsg[te].filter((function(t){return t.id!==e}));var re=g_testMsgIs?{}:a.trigger_scenarios.filter((function(e){return e.id===t}))[0],ne=createEl(_tagButton);classAdd(ne,"_sa_btn_close");var oe=createEl("image"===o.layout.type?_tagDiv:_tagSpan);classAdd(oe,"_sa_link-area");var ae=createEl(_tagDiv);classAdd(ae,"_sa_bottom-group");var ie=createEl(_tagDiv);classAdd(ie,"_sa_bottom-group");var se,ce=[];o.buttons?(ce=o.buttons).find((function(e){return["close","submit"].includes(e.click_action)}))||ce.push({type:"header",order:99,click_action:"close",close_option:{type:"normal"}}):ce.push({type:"header",order:0,click_action:"close",close_option:{type:"normal"}}),o.link&&(o.link.url||g_testMsgIs)&&(se=_getUrlLink(o.link),m.onclick=function(t){t.stopPropagation();try{var r=_getUrlLink(o.link);if(!g_testMsgIs){var n=lodash_clone__WEBPACK_IMPORTED_MODULE_7___default()(c);n.linkUrl=null==r?void 0:r.url,n.clickAction="link",_sphereMsgEvent(e,n,re,"_sphereEvent_iamClicked")}var a="_self";null!=o.link.open_type&&"current"!==o.link.open_type||(a="_self"),(null==r?void 0:r.url)&&setTimeout((function(){g.style.display="none",window.open(r.url,a)}),200)}catch(e){}});var ue={header:ne,main:oe,footer:ae,aftFooter:ie};_addBtn(e,te,g,ce,ue,se,c,re);var le,_e=ue.main.childNodes.length>0;if("banner"===o.shape.type?(appendC(m,ue.header),w||appendC(A,P),_e&&appendC(P,ue.main)):(o.survey||appendC(y,ue.header),"vertical"===o.layout.style["axis-align"]&&["image_text","text_image"].includes(o.layout.type)||"image"===o.layout.type?_e&&appendC(E,ue.main):_e&&appendC(A,ue.main)),ae.childNodes.length>0)(null==D||null===(le=D.banner_rating_num)||void 0===le?void 0:le.check)&&(ue.footer.style.maxWidth=D.banner_rating_num.width),appendC(m,ue.footer);ie.childNodes.length>0&&appendC(W,ue.aftFooter),appendC(y,b),appendC(b,m),appendC(g,v),appendC(y,b),document.body?(appendC(document.body,g),g.style.zIndex=_getMaxZIndex()+1):setTimeout((function(){document.body&&(appendC(document.body,g),g.style.zIndex=_getMaxZIndex()+1)}),200),g_testMsgIs||(_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg,i),_sphereMsgEvent(e,c,re,"_sphereEvent_iamViewed"))}}catch(t){_logger__WEBPACK_IMPORTED_MODULE_9__.a.info("webMsgShowError");var fe=_storage__WEBPACK_IMPORTED_MODULE_10__.a.getItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg);if(fe){var pe=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.m)(fe);delete pe[e],_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.webMsg,pe)}var de=window.location.search.indexOf("sapTestMsg");de>0?window.location.href=window.location.href.substring(0,de):init()}}function _addBtn(e,t,r,n,o,a,i,s){Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.a)("asc",n,"order");var c,u=_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2___default()(n);try{var l=function(){var n=c.value,u=void 0;if("header"===n.type){u=createEl(_tagSpan);var l=createEl(_tagSpan);classAdd(l,"_sa_icon_clear"),n.text&&appendC(o.header,u),appendC(o.header,l)}else"main"===n.type?(classAdd(u=createEl("a"),"_sa_link",n.css_classes),appendC(o.main,u),n.url=a.url):"footer"===n.type?(classAdd(u=createEl(_tagButton),"_sa_button",n.css_classes),appendC(o.footer,u)):"success_footer"===n.type&&(classAdd(u=createEl(_tagSpan),["_sa_button",_cls_pointer],n.css_classes),appendC(o.aftFooter,u));if(n.style){var _=n.style,f=u.style;_["font-style"]&&(f.fontStyle=_["font-style"]),_[_fontSize]&&(f.fontSize=_[_fontSize]+"px"),_.color&&(f.color=_testMsgColor(_.color)),_["text-align"]&&(f.textAlign=_["text-align"]),_[_bgColor]&&(f.backgroundColor=_testMsgColor(_[_bgColor]))}n.css_classes&&classAdd(u,n.css_classes),n.text&&appendT(u,n.text),("header"===n.type?o.header:u).onclick=function(o){try{o.stopPropagation();var a={},c=n.click_action;if((a=lodash_clone__WEBPACK_IMPORTED_MODULE_7___default()(i)).clickAction=c,"submit"===c){var u,l,_,f,p=a.campaignId,d=null===(u=document.querySelector("#"+p))||void 0===u||null===(l=u.dataset)||void 0===l?void 0:l.surveys,h=null===(_=document.querySelector("#"+p))||void 0===_||null===(f=_.dataset)||void 0===f?void 0:f.qArr;if(h){var g=JSON.parse(h);if(g.length>0)return void g.forEach((function(e){var t=document.querySelector("#"+p+"_q_"+e);t&&(t.style.display="inline-block")}))}if(!d)return void(document.querySelector("#"+p).style.display="none");var v=JSON.parse(d);a.survey={questions:v},document.querySelector("#"+p+"> #sa-campaign__v2").style.display="none";var y=document.querySelector("#"+p+"> #sa-campaign-post-process");y&&(y.style.display=null)}else r.style.display="none";var b=n.close_option;if(b&&!g_testMsgIs){var m=0;if("day"===b.type){var E=new Date,O=b.count?b.count:1;E.setDate(E.getDate()+parseInt(O)-1),E.setHours(23),E.setMinutes(59),E.setMilliseconds(59),m=E.getTime(),a.closeOption={type:b.type,count:O}}else"never"===b.type&&(m=new Date("9999-12-31").getTime());if("normal"!==b.type&&(g_notShowMsg[e]=m,_storage__WEBPACK_IMPORTED_MODULE_10__.a.setItem(_config__WEBPACK_IMPORTED_MODULE_11__.a.noShowMsg,g_notShowMsg)),["never","normal"].includes(b.type))return g_allowShowMsg[t]=!0,void _callShowMsg()}var w=_getUrlLink(n);(null==w?void 0:w.url)&&(a.linkUrl=w.url),g_testMsgIs||_sphereMsgEvent(e,a,s,"_sphereEvent_iamClicked"),(null==w?void 0:w.url)?setTimeout((function(){window.open(w.url,"_self")}),200):(g_allowShowMsg[t]=!0,_callShowMsg())}catch(e){}}};for(u.s();!(c=u.n()).done;)l()}catch(e){u.e(e)}finally{u.f()}}function _testMsgColor(e){return(g_testMsgIs?"#":"")+e}function _comparison_num(e,t){var r;return e.eq?r=e.eq.indexOf(t)>-1:(e.lt&&(r=e.lt>t),e.lte&&(r=e.lte>=t),e.gt&&(r=e.gt<t),e.gte&&(r=e.gte<=t)),r}function _getUserInfoValue(e,t){return _config__WEBPACK_IMPORTED_MODULE_11__.a.getUserInfo()[e]?t?_config__WEBPACK_IMPORTED_MODULE_11__.a.getUserInfo()[e][t]:_config__WEBPACK_IMPORTED_MODULE_11__.a.getUserInfo()[e]:null}function _isTestMsg(e,t){(g_testMsgIs=window.location.search.indexOf("sapTestMsg")>0)?e("sapTestMsg"):t()}function _fetchFuncCall(e){try{_fetchStop(),window.sphWebMsg_fetch=setInterval(msgDataCall,e||(g_fetchInterval||g_fetchDefaultInterval))}catch(e){}}function _fetchStop(){try{window.sphWebMsg_fetch&&clearInterval(window.sphWebMsg_fetch)}catch(e){}}function _timeConvertToDay(e){var t=e.split(":"),r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),Number(t[0]),Number(t[1]),Number(t[2])).getTime()}function _sphereMsgEvent(e,t,r,n){try{g_testMsgIs||(r.events||delete t.scenarioEvent,window.SphereAnalytics.logEvent(n,t))}catch(e){}}function _getUrlLink(e){try{var t={url:e.url||e.link},r="web";if(g_testMsgIs&&_config__WEBPACK_IMPORTED_MODULE_11__.a.getDeviceType()===r){var n,o=e.urls||(null===(n=e.link)||void 0===n?void 0:n.urls);if(null!=o&&Array.isArray(o)&&o.length>0){var a="mobile_web";o.find((function(e){return e.platform===a}))&&(r=Object(_util_utils__WEBPACK_IMPORTED_MODULE_12__.h)()?a:r),t=o.find((function(e){return e.platform===r}))}}return t}catch(e){return null}}function _surveySetData(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{var n,o=document.querySelector("#"+e),a=o.dataset,i=Number.parseInt(t.order),s=t.text,c=t.answer;c.replyOrder=Number.parseInt(c.replyOrder),n=a.surveys?(n=JSON.parse(a.surveys)).map((function(e){return e.questionOrder===i&&(e.replies.length<r?e.replies.find((function(e){return lodash_isEqual__WEBPACK_IMPORTED_MODULE_6___default()(e,c)}))||(e.replies=[].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(e.replies),[c])):1===r&&(e.replies=[c])),e})):[{questionOrder:i,questionText:s,replies:[c]}],a.surveys=JSON.stringify(n);var u=JSON.parse(a.qArr);u=u.filter((function(e){return e!=i})),a.qArr=JSON.stringify(u),document.querySelector("#"+e+"_q_"+i).style.display="none"}catch(e){}}function createEl(e){return document.createElement(e)}function appendC(e,t){e.appendChild(t)}function appendT(e,t){appendC(e,document.createTextNode(t))}function classAdd(e,t,r){classSet(e,t,!0),r&&classSet(e,r,!0)}function classRemove(e,t){classSet(e,t,!1)}function classSet(e,t,r){if("string"==typeof t)r?e.classList.add(t):e.classList.remove(t);else if(Array.isArray(t)){var n,o;r?(n=e.classList).add.apply(n,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t)):(o=e.classList).remove.apply(o,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t))}}function colorAdd(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];styleAdd(e,t,r?["bg"]:["cl"])}function styleAdd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=e.style,o={cl:!0,bg:!0,ftSize:!0,ftStyle:!0,ttAlign:!0,setType:function(e){for(var t=0,r=Object.entries(o);t<r.length;t++){var n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(r[t],1)[0];"setType"===n||e.includes(n)||(o[n]=!1)}}};e&&(r&&Array.isArray(r)&&r.length>0&&o.setType(r),(null==t?void 0:t.color)&&o.cl&&(n.color=_testMsgColor(t.color)),(null==t?void 0:t["background-color"])&&o.bg&&(n.backgroundColor=_testMsgColor(t["background-color"])),(null==t?void 0:t["font-size"])&&o.ftSize&&(n.fontSize=t[_fontSize]+"px"),(null==t?void 0:t["font-style"])&&o.ftStyle&&(n.fontSize=t[_fontSize]+"px"),(null==t?void 0:t["text-align"])&&o.ttAlign&&(n.textAlign=t["text-align"]))}function styleRemove(e,t){attrRemove(e,t,"style")}function attrRemove(e,t,r){if(e&&"string"==typeof r&&"string"==typeof t)switch(r){case"style":e.style.removeProperty(t)}}function img_resize(){var maxsize=120,contents=document.querySelectorAll("#sa-campaign__v2"),_iterator3=_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2___default()(contents),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;)for(var _cont=_step3.value,img=_cont.getElementsByTagName("img"),i=0;i<img.length;i++)eval("img["+i+"].width > maxsize")&&eval("img["+i+"].width = maxsize")}catch(e){_iterator3.e(e)}finally{_iterator3.f()}}function _getMaxZIndex(){return Math.max.apply(Math,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(Array.from(document.querySelectorAll("body *"),(function(e){return parseFloat(window.getComputedStyle(e).zIndex)})).filter((function(e){return!Number.isNaN(e)}))).concat([0]))}function _objToStr(e){try{return Object.keys(e).forEach((function(t){return null==e[t]&&delete e[t]})),JSON.stringify(e)}catch(e){return"{}"}}function _strToObj(e){try{return JSON.parse(e)}catch(e){return{}}}var SphereInMessage={init:init,sapMsgTriggerCheck:sapMsgTriggerCheck,_fetchStop:_fetchStop,_fetchFuncCall:_fetchFuncCall};Object.freeze(SphereInMessage),__webpack_exports__.a=SphereInMessage},function(e,t,r){"use strict";var n={namespace:"sphere-sdk",version:"1.1.14",env:"production"};t.a=n},function(e,t,r){var n=r(74),o=r(75),a=r(32),i=r(76);e.exports=function(e,t){return n(e)||o(e,t)||a(e,t)||i()}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(60);e.exports=function(e,t){return n(e,t)}},function(e,t,r){var n=r(7);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},function(e,t,r){var n=r(43),o=r(33);e.exports=function(e,t,r,a){var i=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=a?a(r[u],e[u],u,r,e):void 0;void 0===l&&(l=e[u]),i?o(r,u,l):n(r,u,l)}return r}},function(e,t,r){var n=r(42);e.exports=function(e){return n(e,4)}},function(e,t,r){var n=r(77),o=r(78),a=r(32),i=r(79);e.exports=function(e){return n(e)||o(e)||a(e)||i()}},function(e,t,r){var n=r(28);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(32);e.exports=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}},function(e,t){},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(62),o=r(63),a=r(64),i=r(65),s=r(66);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(41);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t,r){var n=r(81);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(86),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){"use strict";(function(e){var n,o=r(5);var a={init:function(e){n=Object(o.c)(e)},encrypt:function(t){for(var r=e.from(t,"utf8"),a=0;a<r.length;++a)r[a]^=n[a%n.length];return Object(o.d)(r)},decrypt:function(t){for(var r=new e(t,"base64"),a=0;a<r.length;++a)r[a]^=n[a%n.length];return Object(o.n)(r)}};Object.freeze(a),t.a=a}).call(this,r(37).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(57),o=r(58),a=r(59);function i(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return _(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),o=(e=s(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function _(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function h(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,o){var a,i=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var _=!0,f=0;f<c;f++)if(u(e,a+f)!==u(t,f)){_=!1;break}if(_)return a}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function m(e,t,r,n){return q(K(t,e.length-r),e,r,n)}function E(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function O(e,t,r,n){return E(e,t,r,n)}function w(e,t,r,n){return q(G(t),e,r,n)}function A(e,t,r,n){return q(function(e,t){for(var r,n,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function M(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var a,i,s,c,u=e[o],l=null,_=u>239?4:u>223?3:u>191?2:1;if(o+_<=r)switch(_){case 1:u<128&&(l=u);break;case 2:128==(192&(a=e[o+1]))&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(c=(15&u)<<12|(63&a)<<6|63&i)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,_=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=_}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return _(null,e)},c.allocUnsafeSlow=function(e){return _(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!c.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):h.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),s=Math.min(a,i),u=this.slice(n,o),l=e.slice(t,r),_=0;_<s;++_)if(u[_]!==l[_]){a=u[_],i=l[_];break}return a<i?-1:i<a?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return O(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=t;a<r;++a)o+=W(e[a]);return o}function k(e,t,r){for(var n=e.slice(t,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,o,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-r,2);o<a;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function x(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-r,4);o<a;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function j(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,a){return a||j(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,a){return a||j(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);C(this,e,t,r,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);C(this,e,t,r,o-1,-o)}var a=r-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=c.isBuffer(e)?e:K(new c(e,n).toString()),s=i.length;for(a=0;a<r-t;++a)this[a+t]=i[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var r;t=t||1/0;for(var n=e.length,o=null,a=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(26))},function(e,t,r){var n=r(29)(Object.keys,Object);e.exports=n},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){var n=r(27),o=r(80),a=r(43),i=r(83),s=r(84),c=r(45),u=r(35),l=r(87),_=r(89),f=r(38),p=r(91),d=r(39),h=r(92),g=r(93),v=r(46),y=r(13),b=r(30),m=r(96),E=r(14),O=r(97),w=r(44),A=r(23),M="[object Arguments]",T="[object Function]",P="[object Object]",I={};I[M]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[P]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[T]=I["[object WeakMap]"]=!1,e.exports=function e(t,r,S,R,k,D){var C,U=1&r,x=2&r,j=4&r;if(S&&(C=k?S(t,R,k,D):S(t)),void 0!==C)return C;if(!E(t))return t;var N=y(t);if(N){if(C=h(t),!U)return u(t,C)}else{var L=d(t),B=L==T||"[object GeneratorFunction]"==L;if(b(t))return c(t,U);if(L==P||L==M||B&&!k){if(C=x||B?{}:v(t),!U)return x?_(t,s(C,t)):l(t,i(C,t))}else{if(!I[L])return k?t:{};C=g(t,L,U)}}D||(D=new n);var W=D.get(t);if(W)return W;D.set(t,C),O(t)?t.forEach((function(n){C.add(e(n,r,S,n,t,D))})):m(t)&&t.forEach((function(n,o){C.set(o,e(n,r,S,o,t,D))}));var K=N?void 0:(j?x?p:f:x?A:w)(t);return o(K||t,(function(n,o){K&&(n=t[o=n]),a(C,o,e(n,r,S,o,t,D))})),C}},function(e,t,r){var n=r(33),o=r(28),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];a.call(e,t)&&o(i,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(29)(Object.keys,Object);e.exports=n},function(e,t,r){(function(e){var n=r(34),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?n.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(85)(e))},function(e,t,r){var n=r(94),o=r(47),a=r(95);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(o(e))}},function(e,t,r){var n=r(29)(Object.getPrototypeOf,Object);e.exports=n},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(33),o=r(28);e.exports=function(e,t,r){(void 0!==r&&!o(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},function(e,t,r){var n=r(52),o=r(14);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,r){var n=r(48),o=r(98),a=r(35),i=r(13);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],s=e;s--;)t[s-1]=arguments[s];return n(i(r)?a(r):[r],o(t,1))}},function(e,t,r){var n=r(101),o=r(113)((function(e,t,r,o){n(e,t,r,o)}));e.exports=o},function(e,t,r){var n=r(42);e.exports=function(e){return n(e,5)}},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),i=n[0],s=n[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,i,s)),l=0,_=s>0?i-4:i;for(r=0;r<_;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,a=[],i=16383,s=0,c=r-o;s<c;s+=i)a.push(l(e,s,s+i>c?c:s+i));1===o?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=i.length;s<c;++s)n[s]=i[s],o[i.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,a,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var a,i,s=8*o-n-1,c=(1<<s)-1,u=c>>1,l=-7,_=r?o-1:0,f=r?-1:1,p=e[t+_];for(_+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+_],_+=f,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=n;l>0;i=256*i+e[t+_],_+=f,l-=8);if(0===a)a=1-u;else{if(a===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),a-=u}return(p?-1:1)*i*Math.pow(2,a-n)},t.write=function(e,t,r,n,o,a){var i,s,c,u=8*a-o-1,l=(1<<u)-1,_=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+_>=1?f/c:f*Math.pow(2,1-_))*c>=2&&(i++,c/=2),i+_>=l?(s=0,i=l):i+_>=1?(s=(t*c-1)*Math.pow(2,o),i+=_):(s=t*Math.pow(2,_-1)*Math.pow(2,o),i=0));o>=8;e[r+p]=255&s,p+=d,s/=256,o-=8);for(i=i<<o|s,u+=o;u>0;e[r+p]=255&i,p+=d,i/=256,u-=8);e[r+p-d]|=128*h}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(61),o=r(31);e.exports=function e(t,r,a,i,s){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,a,i,e,s))}},function(e,t,r){var n=r(27),o=r(67),a=r(72),i=r(73),s=r(39),c=r(13),u=r(30),l=r(40),_="[object Arguments]",f="[object Array]",p="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,h,g,v){var y=c(e),b=c(t),m=y?f:s(e),E=b?f:s(t),O=(m=m==_?p:m)==p,w=(E=E==_?p:E)==p,A=m==E;if(A&&u(e)){if(!u(t))return!1;y=!0,O=!1}if(A&&!O)return v||(v=new n),y||l(e)?o(e,t,r,h,g,v):a(e,t,m,r,h,g,v);if(!(1&r)){var M=O&&d.call(e,"__wrapped__"),T=w&&d.call(t,"__wrapped__");if(M||T){var P=M?e.value():e,I=T?t.value():t;return v||(v=new n),g(P,I,r,h,v)}}return!!A&&(v||(v=new n),i(e,t,r,h,g,v))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(22),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},function(e,t,r){var n=r(22);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(22);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(22);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(68),o=r(69),a=r(70);e.exports=function(e,t,r,i,s,c){var u=1&r,l=e.length,_=t.length;if(l!=_&&!(u&&_>l))return!1;var f=c.get(e),p=c.get(t);if(f&&p)return f==t&&p==e;var d=-1,h=!0,g=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++d<l;){var v=e[d],y=t[d];if(i)var b=u?i(y,v,d,t,e,c):i(v,y,d,e,t,c);if(void 0!==b){if(b)continue;h=!1;break}if(g){if(!o(t,(function(e,t){if(!a(g,t)&&(v===e||s(v,e,r,i,c)))return g.push(t)}))){h=!1;break}}else if(v!==y&&!s(v,y,r,i,c)){h=!1;break}}return c.delete(e),c.delete(t),h}},function(e,t,r){var n=r(13);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return n(e)?e:[e]}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t,r){var n=r(71);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},function(e,t){e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(38),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,i,s){var c=1&r,u=n(e),l=u.length;if(l!=n(t).length&&!c)return!1;for(var _=l;_--;){var f=u[_];if(!(c?f in t:o.call(t,f)))return!1}var p=s.get(e),d=s.get(t);if(p&&d)return p==t&&d==e;var h=!0;s.set(e,t),s.set(t,e);for(var g=c;++_<l;){var v=e[f=u[_]],y=t[f];if(a)var b=c?a(y,v,f,t,e,s):a(v,y,f,e,t,s);if(!(void 0===b?v===y||i(v,y,r,a,s):b)){h=!1;break}g||(g="constructor"==f)}if(h&&!g){var m=e.constructor,E=t.constructor;m==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof E&&E instanceof E||(h=!1)}return s.delete(e),s.delete(t),h}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){var n=r(41);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(82),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(19),o=r(44);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t,r){var n=r(19),o=r(23);e.exports=function(e,t){return e&&n(t,o(t),e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(26))},function(e,t,r){var n=r(19),o=r(88);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var n=r(19),o=r(90);e.exports=function(e,t){return n(e,o(e),t)}},function(e,t){e.exports=function(){return[]}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(14),o=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(){return!1}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(48),o=r(99);e.exports=function e(t,r,a,i,s){var c=-1,u=t.length;for(a||(a=o),s||(s=[]);++c<u;){var l=t[c];r>0&&a(l)?r>1?e(l,r-1,a,i,s):n(s,l):i||(s[s.length]=l)}return s}},function(e,t,r){var n=r(100),o=r(49),a=r(13),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t,r){var n=r(34).Symbol;e.exports=n},function(e,t,r){var n=r(27),o=r(50),a=r(102),i=r(104),s=r(14),c=r(23),u=r(53);e.exports=function e(t,r,l,_,f){t!==r&&a(r,(function(a,c){if(f||(f=new n),s(a))i(t,r,c,l,e,_,f);else{var p=_?_(u(t,c),a,c+"",t,r,f):void 0;void 0===p&&(p=a),o(t,c,p)}}),c)}},function(e,t,r){var n=r(103)();e.exports=n},function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var c=i[e?s:++o];if(!1===r(a[c],c,a))break}return t}}},function(e,t,r){var n=r(50),o=r(45),a=r(105),i=r(35),s=r(46),c=r(49),u=r(13),l=r(108),_=r(30),f=r(51),p=r(14),d=r(111),h=r(40),g=r(53),v=r(112);e.exports=function(e,t,r,y,b,m,E){var O=g(e,r),w=g(t,r),A=E.get(w);if(A)n(e,r,A);else{var M=m?m(O,w,r+"",e,t,E):void 0,T=void 0===M;if(T){var P=u(w),I=!P&&_(w),S=!P&&!I&&h(w);M=w,P||I||S?u(O)?M=O:l(O)?M=i(O):I?(T=!1,M=o(w,!0)):S?(T=!1,M=a(w,!0)):M=[]:d(w)||c(w)?(M=O,c(O)?M=v(O):p(O)&&!f(O)||(M=s(w))):T=!1}T&&(E.set(w,M),b(M,w,y,m,E),E.delete(w)),n(e,r,M)}}},function(e,t,r){var n=r(106);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(107);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){var n=r(34).Uint8Array;e.exports=n},function(e,t,r){var n=r(109),o=r(31);e.exports=function(e){return o(e)&&n(e)}},function(e,t,r){var n=r(51),o=r(110);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,r){var n=r(52),o=r(47),a=r(31),i=Function.prototype,s=Object.prototype,c=i.toString,u=s.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==l}},function(e,t,r){var n=r(19),o=r(23);e.exports=function(e){return n(e,o(e))}},function(e,t,r){var n=r(114),o=r(119);e.exports=function(e){return n((function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,s&&o(r[0],r[1],s)&&(i=a<3?void 0:i,a=1),t=Object(t);++n<a;){var c=r[n];c&&e(t,c,n,i)}return t}))}},function(e,t,r){var n=r(115),o=r(116),a=r(118);e.exports=function(e,t){return a(o(e,t,n),e+"")}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(117),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,s=o(a.length-t,0),c=Array(s);++i<s;)c[i]=a[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=a[i];return u[t]=r(c),n(e,this,u)}}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(){return!1}},function(e,t,r){(function(t,r){var n;n=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,i=void 0,s=function(e,t){d[o]=e,d[o+1]=t,2===(o+=2)&&(i?i(h):m())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,_="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(h,1)}}var d=new Array(1e3);function h(){for(var e=0;e<o;e+=2)(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;o=0}var g,v,y,b,m=void 0;function E(e,t){var r=this,n=new this.constructor(A);void 0===n[w]&&x(n);var o=r._state;if(o){var a=arguments[o-1];s((function(){return C(o,n,a,r._result)}))}else k(r,n,e,t);return n}function O(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(A);return P(t,e),t}_?m=function(){return t.nextTick(h)}:l?(v=0,y=new l(h),b=document.createTextNode(""),y.observe(b,{characterData:!0}),m=function(){b.data=v=++v%2}):f?((g=new MessageChannel).port1.onmessage=h,m=function(){return g.port2.postMessage(0)}):m=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(h)}:p()}catch(e){return p()}}():p();var w=Math.random().toString(36).substring(2);function A(){}var M=void 0;function T(t,r,n){r.constructor===t.constructor&&n===E&&r.constructor.resolve===O?function(e,t){1===t._state?S(e,t._result):2===t._state?R(e,t._result):k(t,void 0,(function(t){return P(e,t)}),(function(t){return R(e,t)}))}(t,r):void 0===n?S(t,r):e(n)?function(e,t,r){s((function(e){var n=!1,o=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,(function(r){n||(n=!0,t!==r?P(e,r):S(e,r))}),(function(t){n||(n=!0,R(e,t))}),e._label);!n&&o&&(n=!0,R(e,o))}),e)}(t,r,n):S(t,r)}function P(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=t),null===n||"object"!==o&&"function"!==o)S(e,t);else{var r=void 0;try{r=t.then}catch(t){return void R(e,t)}T(e,t,r)}var n,o}function I(e){e._onerror&&e._onerror(e._result),D(e)}function S(e,t){e._state===M&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(D,e))}function R(e,t){e._state===M&&(e._state=2,e._result=t,s(I,e))}function k(e,t,r,n){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+1]=r,o[a+2]=n,0===a&&e._state&&s(D,e)}function D(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,a=e._result,i=0;i<t.length;i+=3)n=t[i],o=t[i+r],n?C(r,n,o,a):o(a);e._subscribers.length=0}}function C(t,r,n,o){var a=e(n),i=void 0,s=void 0,c=!0;if(a){try{i=n(o)}catch(e){c=!1,s=e}if(r===i)return void R(r,new TypeError("A promises callback cannot return that same promise."))}else i=o;r._state!==M||(a&&c?P(r,i):!1===c?R(r,s):1===t?S(r,i):2===t&&R(r,i))}var U=0;function x(e){e[w]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}var j=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[w]||x(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&S(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===M&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===O){var o=void 0,a=void 0,i=!1;try{o=e.then}catch(e){i=!0,a=e}if(o===E&&e._state!==M)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===N){var s=new r(A);i?R(s,a):T(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===M&&(this._remaining--,2===e?R(n,r):this._result[t]=r),0===this._remaining&&S(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}(),N=function(){function t(e){this[w]=U++,this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){P(e,t)}),(function(t){R(e,t)}))}catch(t){R(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();return N.prototype.then=E,N.all=function(e){return new j(this,e).promise},N.race=function(e){var t=this;return n(e)?new t((function(r,n){for(var o=e.length,a=0;a<o;a++)t.resolve(e[a]).then(r,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},N.resolve=O,N.reject=function(e){var t=new this(A);return R(t,e),t},N._setScheduler=function(e){i=e},N._setAsap=function(e){s=e},N._asap=s,N.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N},N.Promise=N,N},e.exports=n()}).call(this,r(121),r(26))},function(e,t){var r,n,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,u=[],l=!1,_=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):_=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++_<t;)c&&c[_].run();_=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";r.r(t);r(25);var n=r(9),o=r.n(n),a=r(15),i=r.n(a),s=r(16),c=r.n(s),u=r(7),l=r.n(u),_=r(3),f=r(5),p=r(2),d=r(6),h=r(11),g=r(8),v=r(4),y=r(1),b=r(0),m=r(10);var E={_sdkActiveListener:function(){document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?window.SphereAnalytics._inMessageStart():window.SphereAnalytics._inMessageStop()}))}};Object.freeze(E);var O=E;function w(e){try{if(e.data.indexOf("sphereId")>0){var t=JSON.parse(e.data),r=t.sphereId,n=t.appKey,o=t.version,a=t.versionCode;SphereAnalytics._setInfo(r,n,o,a)}}catch(e){_.a.log(e)}}var A=function(){function e(t,r){i()(this,e),l()(this,"uid",""),l()(this,"appKey",""),l()(this,"version",""),l()(this,"versionCode",0),l()(this,"deviceType",""),l()(this,"_native",null),l()(this,"_tmpSavedMsg",[]),this.deviceType=t,this._native=r,y.a.setDeviceType(t)}return c()(e,[{key:"init",value:function(e,t){return this.optionSet(t),_.a.info("Sphere Web SDK version ".concat(h.a.version)),this.setGaId(),this.setWebSDKVersion(),"rn"===this.deviceType?this._initSphereInfo():this._getSphereInfo(),-1===["aos","ios"].indexOf(this.deviceType)&&this._messageListenerInit(),this}},{key:"setUserId",value:function(e){e||(e=null);var t=Object(p.a)(e);if(Object(p.b)(b.f.STRING,t,!0)){var r={command:"setUserId",userId:t,value:t};this._postMessage(r),d.a.eventPropLog(!0,b.e.USER_ID,t)}else Object(p.c)(b.e.USER_ID,t,b.f.STRING);return this}},{key:"logEvent",value:function(e,t){var r=Object(p.d)("event",e);if(r)if(t&&Object.keys(t).length>0)for(var n in t)Object(p.d)("parameters",n)||(r=!1);else t={};else;if(r){t.sapDate=Date.now();var o={command:"logEvent",name:e,parameters:t};this._postMessage(o),d.a.eventPropLog(!1,e,t)}return this}},{key:"setGrade",value:function(e){e||(e=null);var t=Object(p.a)(e);if(Object(p.b)(b.f.STRING,t,!0)){var r={command:"setGrade",grade:t,value:t};this._postMessage(r),d.a.eventPropLog(!0,b.e.GRADE,t)}else Object(p.c)(b.e.GRADE,t,b.f.STRING);return this}},{key:"setGender",value:function(e){if(e||(e=null),Object(p.b)(b.f.STRING,e,!0))if(null===e||e.match(/[mf]/)&&1==e.length){var t={command:"setGender",gender:e,value:e};this._postMessage(t),d.a.eventPropLog(!0,b.e.GENDER,e)}else _.a.error("setGender: value must be 'm' or 'f'.");else Object(p.c)(b.e.GENDER,e,b.f.STRING);return this}},{key:"setBirthYear",value:function(e){if(e||(e=0),Object(p.b)(b.f.INTEGER,e)){var t={command:"setBirthYear",year:e,value:e};this._postMessage(t),d.a.eventPropLog(!0,b.e.BIRTH_YEAR,e)}else Object(p.c)(b.e.BIRTH_YEAR,e,b.f.NUMBER);return this}},{key:"setPhoneNumber",value:function(e){if(e||(e=null),Object(p.b)(b.f.STRING,e,!0)){var t={command:"setPhoneNumber",number:e,value:e};this._postMessage(t),d.a.eventPropLog(!0,"sapPhone",e)}else Object(p.c)(b.e.PHONE,e,b.f.STRING);return this}},{key:"setEmail",value:function(e){if(e||(e=null),Object(p.b)(b.f.STRING,e,!0)){var t={command:"setEmail",email:e,value:e};this._postMessage(t),d.a.eventPropLog(!0,"sapEmail",e)}else Object(p.c)(b.e.EMAIL,e,b.f.STRING);return this}},{key:"setRemainingPoint",value:function(e,t){if(null!=e&&Object(p.b)(b.f.INTEGER,e,!1)){var r={command:"setRemainingPoint",name:t||"point",point:e};this._postMessage(r)}else Object(p.c)(b.e.REMAIN_POINT,e,b.f.NUMBER);return this}},{key:"setTotalEarnedPoint",value:function(e,t){if(null!=e&&Object(p.b)(b.f.INTEGER,e,!1)){var r={command:"setTotalEarnedPoint",name:t||"point",point:e};this._postMessage(r)}else Object(p.c)(b.e.TOTAL_EARNED_POINT,e,b.f.NUMBER);return this}},{key:"setTotalUsedPoint",value:function(e,t){if(null!=e&&Object(p.b)(b.f.INTEGER,e,!1)){var r={command:"setTotalUsedPoint",name:t||"point",point:e};this._postMessage(r)}else Object(p.c)(b.e.TOTAL_USED_POINT,e,b.f.NUMBER);return this}},{key:"removePoints",value:function(e){var t={command:"removePoints",name:e||"point"};return this._postMessage(t),this}},{key:"resetPoints",value:function(){return this._postMessage({command:"resetPoints"}),this}},{key:"setUserProperty",value:function(e,t){var r=Object(p.a)(t),n=Object(p.b)(b.f.STRING,e)&&Object(p.d)("user property",e),o=Object(p.b)(b.f.STRING,r,!0);if(n&&o){var a={command:"setUserProperty",name:e,value:r};this._postMessage(a),d.a.eventPropLog(!0,e,r)}else n||Object(p.c)(b.e.USER_PROPERTY,e,b.f.STRING),o||Object(p.c)(b.e.USER_PROPERTY,t,b.f.STRING);return this}},{key:"setUserPropertyLong",value:function(e,t){var r=Object(p.b)(b.f.STRING,e)&&Object(p.d)("user propertyLong",e),n=Object(p.b)(b.f.INTEGER,t,!1);if(r&&n){var o={command:"setUserPropertyLong",name:e,value:t};this._postMessage(o),d.a.eventPropLog(!0,e,t)}else r||Object(p.c)(b.e.USER_PROPERTY_LONG,e,b.f.STRING),n||Object(p.c)(b.e.USER_PROPERTY_LONG,t,b.f.NUMBER);return this}},{key:"setUserPropertyArray",value:function(e,t){try{var r={command:"setUserPropertyArray",name:e,value:t};this._postMessage(r),_.a.info("".concat(e," of props is ").concat(t,"."))}catch(e){_.a.error(e)}}},{key:"removeUserProperty",value:function(e){if(o()(e)===b.f.STRING)try{var t={command:"removeUserProperty",name:e};this._postMessage(t),_.a.info("".concat(e," of props is reset."))}catch(e){_.a.error(e)}else Object(p.c)(b.e.REMOVE_PROPERTY,e,b.f.STRING);return this}},{key:"resetUserProperties",value:function(){return this._postMessage({command:"resetUserProperties"}),this}},{key:"requestUpload",value:function(){return this._postMessage({command:"requestUpload"}),this}},{key:"setGaId",value:function(){var e=y.a.getGaId();if(e){var t={command:"setAttributionId",vendor:"sapGa",attributionId:e.toString()};this._postMessage(t)}return this}},{key:"setWebSDKVersion",value:function(){var e={command:"setWebSdkVersion",value:h.a.version};return this._postMessage(e),this}},{key:"_postMessage",value:function(e){var t;try{"aos"===this.deviceType?this.versionCode>1190||0===this.versionCode?t=this._native.postMessage(JSON.stringify(e)):_.a.error("required for Android SDK v1.2.0"):"ios"===this.deviceType?this._native.postMessage(e):"rn"===this.deviceType&&("rn"===this.deviceType&&(e.msgType="sphereRnMsg"),this._native.postMessage(JSON.stringify(e))),this._collectedMsg(e)}catch(e){_.a.error(e),this.versionCode=1}return t}},{key:"_getSphereInfo",value:function(){var e,t={commandType:"sphereInfo",command:"getSphereInfo"};if(e=this._native.postMessage(JSON.stringify(t)),"aos"===this.deviceType&&null!=e&&""!==e)switch(t.command){case"getSphereInfo":var r=JSON.parse(e);this._setInfo(r.sphereId,r.appKey,r.version,r.versionCode)}}},{key:"_setInfo",value:function(e,t,r,n){if(!y.a.getInitCheck()){if(_.a.log("uid",e),_.a.log("appKey",t),_.a.log("version",r),_.a.log("versionCode",n),null!=e&&""!==e&&(v.a.setUid(e),this.uid=e,g.a.init(v.a.getUid())),null!=t&&""!==t&&(this.appKey=t,y.a.setAppKey(t)),null!=r&&""!==r&&(this.version=r,y.a.setVersion(r)),null!=n&&""!==n&&(this.versionCode=Number(n)),v.a.setItem(y.a.storageInfo,{sphereId:e,appKey:t,version:r,versionCode:n}),y.a.setInitCheck(!0),m.a.init(),O._sdkActiveListener(),this._tmpSavedMsg.length>0)for(var o;o=this._tmpSavedMsg.shift();)this._collectedMsg(o);return this}}},{key:"_messageListenerInit",value:function(){f.i.IOS()?window.addEventListener("message",w):document.addEventListener("message",w)}},{key:"setLogLevel",value:function(e){_.a.setLogLevel(e);var t=!1;switch(e){case"info":case"verbose":t=!0}var r={command:"enableLog",enable:t};return this._postMessage(r),this}},{key:"_collectedMsg",value:function(e){if(null!=y.a.getAppKey()){var t,r;if(["setUserId","setGrade","setGender","setBirthYear","setEmail","setUserProperty","setUserPropertyLong","setUserPropertyArray","removeUserProperty","resetUserProperties"].indexOf(e.command)>-1)t="prop";else if(["setRemainingPoint","setTotalEarnedPoint","setTotalUsedPoint","removePoints","resetPoints"].indexOf(e.command)>-1)t="asset";else{if("logEvent"!==e.command)return;t="event"}switch(e.command){case"logEvent":r="events";break;case"setUserId":r="#userId";break;case"setGrade":r="sapGrade";break;case"setGender":r="sapGender";break;case"setBirthYear":r="sapBirthYear",e.value=0==e.value?null:e.value;break;case"setPhoneNumber":r="sapPhone";break;case"setEmail":r="sapEmail";break;case"setRemainingPoint":r="remain";break;case"setTotalEarnedPoint":r="earned";break;case"setTotalUsedPoint":r="used";break;case"setUserProperty":case"setUserPropertyLong":case"setUserPropertyArray":r="prop";break;case"removePoints":r="removePoints";break;case"resetPoints":r="resetPoints";break;case"removeUserProperty":r="removeUser";break;case"resetUserProperties":r="resetUser"}if("event"===t){var n=Object(f.b)(e.name);g.a.put(d.a.event((n.check?"@":"")+n.name,e.parameters))}else if("prop"===t)"prop"===r?g.a.put(d.a.prop(e.name,e.value)):g.a.put(d.a.prop(r,e.value));else if("asset"===t){var o;o=["removePoint","resetPoint"].indexOf(r)>-1?d.a.asset(e.name?e.name:null):d.a.asset(e.name,r,e.point),g.a.put(o)}}else this._tmpSavedMsg.push(e)}},{key:"_initSphereInfo",value:function(){var e=v.a.getItem(y.a.storageInfo);if(null!=e&&""!==e)try{var t=JSON.parse(e),r=t.sphereId,n=t.appKey,o=t.version,a=t.versionCode;this._setInfo(r,n,o,a)}catch(e){_.a.log(e)}}},{key:"_checkOpt",value:function(){return y.a.getInfo(),this}},{key:"_inMessageStop",value:function(){m.a._fetchStop()}},{key:"_inMessageStart",value:function(){m.a.init()}},{key:"optionSet",value:function(e){null!=e&&y.a.optionSet(e)}}]),e}(),M=function(){function e(t,r){i()(this,e),l()(this,"deviceType",""),l()(this,"_native",null),this.deviceType=t,this._native=r,y.a.setDeviceType(t),y.a.setVersion(h.a.version),v.a.init(this.deviceType)}return c()(e,[{key:"init",value:function(e,t){if(y.a.getInitCheck())return _.a.info("already web sdk init"),this;if(this.optionSet(t),v.a.init(this.deviceType),o()(e)===b.f.STRING&&0==/\s/.test(e))y.a.setAppKey(e),y.a.setBrowserNotSupported(),y.a.setInitCheck(!0);else if(!y.a.getAppKey())return console.error("Invalid Sphere Web Key Error."),this;return _.a.info("Sphere Web SDK version ".concat(h.a.version)),y.a.getBrowserNotSupported()||(g.a.init(v.a.getUid()),(null!==v.a.getStorageRef()&&!0===JSON.parse(v.a.getStorageRef())._isUtm||v.a.checkTs()||v.a.getRemainMsgCheck())&&g.a.put(),m.a.init(),O._sdkActiveListener()),this}},{key:"setUserId",value:function(e){e||(e=null);var t=Object(p.a)(e);return this._checkAllowHttp(e)?(Object(p.b)(b.f.STRING,t,!0)?g.a.put(d.a.prop("#userId",t)):Object(p.c)(b.e.USER_ID,t,b.f.STRING),this):this}},{key:"logEvent",value:function(e,t){var r=Object(f.b)(e),n=Object(p.d)("event",r.name);if(n)if(t&&Object.keys(t).length>0)for(var o in t)Object(p.d)("param",o)||(n=!1);else t=null;else;return n&&g.a.put(d.a.event((r.check?"@":"")+r.name,t)),this}},{key:"setGrade",value:function(e){e||(e=null);var t=Object(p.a)(e);return this._checkAllowHttp(e)?(Object(p.b)(b.f.STRING,t,!0)?g.a.put(d.a.prop("sapGrade",t)):Object(p.c)(b.e.GRADE,t,b.f.STRING),this):this}},{key:"setGender",value:function(e){return e||(e=null),this._checkAllowHttp(e)?(Object(p.b)(b.f.STRING,e,!0)?null==e||e.match(/[mf]/)&&1==e.length?g.a.put(d.a.prop("sapGender",e)):_.a.error("setGender: value must be 'm' or 'f'."):Object(p.c)(b.e.GENDER,e,b.f.STRING),this):this}},{key:"setBirthYear",value:function(e){if(e||(e=0),Object(p.b)(b.f.INTEGER,e)){if(0===e&&(e=null),!this._checkAllowHttp(e))return this;g.a.put(d.a.prop("sapBirthYear",e))}else Object(p.c)(b.e.BIRTH_YEAR,e,b.f.NUMBER);return this}},{key:"setPhoneNumber",value:function(e){return e||(e=null),this._checkAllowHttp(e)?(Object(p.b)(b.f.STRING,e,!0)?g.a.put(d.a.prop("sapPhone",e)):Object(p.c)(b.e.PHONE,e,b.f.STRING),this):this}},{key:"setEmail",value:function(e){return e||(e=null),this._checkAllowHttp(e)?(Object(p.b)(b.f.STRING,e,!0)?g.a.put(d.a.prop("sapEmail",e)):Object(p.c)(b.e.EMAIL,e,b.f.STRING),this):this}},{key:"setRemainingPoint",value:function(e,t){return null!=e&&Object(p.b)(b.f.INTEGER,e,!1)?g.a.put(d.a.asset(t||b.e.POINT,"remain",e)):Object(p.c)(b.e.REMAIN_POINT,e,b.f.NUMBER),this}},{key:"setTotalEarnedPoint",value:function(e,t){return null!=e&&Object(p.b)(b.f.INTEGER,e,!1)?g.a.put(d.a.asset(t||b.e.POINT,"earned",e)):Object(p.c)(b.e.TOTAL_EARNED_POINT,e,b.f.NUMBER),this}},{key:"setTotalUsedPoint",value:function(e,t){return null!=e&&Object(p.b)(b.f.INTEGER,e,!1)?g.a.put(d.a.asset(t||b.e.POINT,"used",e)):Object(p.c)(b.e.TOTAL_USED_POINT,e,b.f.NUMBER),this}},{key:"setUserProperty",value:function(e,t){t||(t=null);var r=Object(p.a)(t),n=Object(p.b)(b.f.STRING,e)&&Object(p.d)("user property",e),o=Object(p.b)(b.f.STRING,r,!0);return n&&o?g.a.put(d.a.prop(e,r)):(n||Object(p.c)(b.e.USER_PROPERTY,e,b.f.STRING),o||Object(p.c)(b.e.USER_PROPERTY,t,b.f.STRING)),this}},{key:"setUserPropertyLong",value:function(e,t){var r=Object(p.b)(b.f.STRING,e)&&Object(p.d)("user propertyLong",e),n=Object(p.b)(b.f.INTEGER,t,!1);return r&&n?(g.a.put(d.a.prop(e,null===t?null:t)),y.a.setUserInfo(e,t)):(r||Object(p.c)(b.e.USER_PROPERTY_LONG,e,b.f.STRING),n||Object(p.c)(b.e.USER_PROPERTY_LONG,t,b.f.NUMBER)),this}},{key:"setUserPropertyArray",value:function(e,t){var r=Object(p.b)(b.f.STRING,e)&&Object(p.d)("user propertyArray",e);return r?(g.a.put(d.a.prop(e,null===t?null:t)),y.a.setUserInfo(e,t)):r||Object(p.c)("user propertyArray",e,b.f.STRING),this}},{key:"removePoints",value:function(e){return g.a.put(d.a.asset(e||"point")),this}},{key:"resetPoints",value:function(){return this._checkAllowHttp(null)?(g.a.put(d.a.asset(null)),this):this}},{key:"resetUserProperties",value:function(){v.a.setProp(v.a.getUid(),!0)}},{key:"removeUserProperty",value:function(e){return o()(e)===b.f.STRING?(this.setUserProperty(e,null),_.a.info("".concat(e," of props is reset."))):Object(p.c)(b.e.REMOVE_PROPERTY,e,b.f.STRING),this}},{key:"requestUpload",value:function(){return this}},{key:"_postMessage",value:function(e,t){if(null!=e&&""!==e){var r={pushAgree:{}};r.pushAgree[e]=t,r.date=Date.now(),g.a.put(r)}return this}},{key:"_checkAllowHttp",value:function(e){return!(""===v.a.getProp()&&null===e)}},{key:"_checkOpt",value:function(){return y.a.getInfo(),this}},{key:"_focusOnOut",value:function(){}},{key:"setLogLevel",value:function(e){return e||(e="none"),_.a.setLogLevel(e),this}},{key:"_setInfo",value:function(e){y.a.getInitCheck()||(v.a.setUid(e),this.init(y.a.getAppKey()))}},{key:"_inMessageStop",value:function(){m.a._fetchStop()}},{key:"_inMessageStart",value:function(){m.a.init()}},{key:"optionSet",value:function(e){null!=e&&y.a.optionSet(e)}}]),e}(),T=function(){function e(t,r){var n=this;i()(this,e),l()(this,"deviceType",""),l()(this,"api",null),l()(this,"pushStr",{device:{info:"agreePushMessageForInformation",ad:"agreePushMessageForAdvertisement",atNight:"agreePushMessageAtNight"},web:{info:"info",ad:"ad",atNight:"night"}}),l()(this,"agreePushMessageForInformation",(function(e){return"web"!=n.deviceType?n._agreePushMessage(n.pushStr.device.info,e):n._agreePushMessage(n.pushStr.web.info,e),n._pushSetDataLog(b.e.PUSH_INFO,e),n})),l()(this,"agreePushMessageForAdvertisement",(function(e){return"web"!=n.deviceType?n._agreePushMessage(n.pushStr.device.ad,e):n._agreePushMessage(n.pushStr.web.ad,e),n._pushSetDataLog(b.e.PUSH_AD,e),n})),l()(this,"agreePushMessageAtNight",(function(e){return"web"!=n.deviceType?n._agreePushMessage(n.pushStr.device.atNight,e):n._agreePushMessage(n.pushStr.web.atNight,e),n._pushSetDataLog(b.e.PUSH_NIGHT,e),n})),l()(this,"setFcmToken",(function(e){try{if("aos"==n.deviceType||"ios"==n.deviceType){var t={commandType:"pushMessage",command:"setFcmToken",token:e};n.api._postMessage(t)}else n.api._postMessage("fcm",e);n._pushSetDataLog(b.e.PUSH_FCM,e)}catch(e){_.a.error(e)}return n})),this.deviceType=t,this.api=r}return c()(e,[{key:"_agreePushMessage",value:function(e,t){try{if("web"!=this.deviceType){var r={commandType:"pushMessage",command:e,agree:t};this.api._postMessage(r)}else this.api._postMessage(e,t)}catch(e){_.a.error(e)}}},{key:"_pushSetDataLog",value:function(e,t){_.a.info("Set ".concat(e," : ").concat(t))}}]),e}();t.default=function(){var e,t,r=[];if(window.SphereAnalytics&&!(r=window.SphereAnalytics._q))return window.SphereAnalytics;e=window.ReactNativeWebView?new A(t="rn",window.ReactNativeWebView):window.SphereJsInterface?new A(t="aos",window.SphereJsInterface):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sphere?new A(t="ios",window.webkit.messageHandlers.sphere):new M(t="web");for(var n=0;n<r.length;n++)e[r[n][0]].apply(e,r[n][1]);return window.SpherePushMessage||(window.SpherePushMessage=function(e,t){if(window.SpherePushMessage)return window.SpherePushMessage;return new T(e,t)}(t,e)),e}()}]).default}));